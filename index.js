(()=>{"use strict";var e={90:(e,t,i)=>{i.d(t,{Z:()=>n});var o=i(645),s=i.n(o)()((function(e){return e[1]}));s.push([e.id,':host{--divider-width: 1px;--divider-color: #fff;--default-handle-width: 50px;--default-handle-color: #fff;--default-handle-opacity: 1;position:relative;display:inline-block;font-size:0;overflow:hidden;isolation:isolate;line-height:0}::slotted(img){-webkit-user-drag:none;-khtml-user-drag:none;-moz-user-drag:none;-o-user-drag:none;user-drag:none;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.before{position:relative;z-index:-2}.after{position:absolute;left:0;top:0;bottom:0;z-index:-1}.after .after-overlay{overflow:hidden}.handle-container{transform:translateX(50%);position:absolute;right:0;height:100%;display:flex;align-items:flex-end;justify-content:center;flex-direction:column}.divider{position:absolute;height:100%;width:100%;left:0;top:0;display:flex;align-items:center;justify-content:center;flex-direction:column}.divider:after{content:" ";display:block;height:100%;border-left-width:var(--divider-width);border-left-style:solid;border-left-color:var(--divider-color)}.handle{pointer-events:none;box-sizing:border-box;margin-left:1px;transform:translateX(-0.5px)}.default-handle{width:var(--default-handle-width);opacity:var(--default-handle-opacity);transition:all 1s;filter:drop-shadow(0px 0px 5px black)}.default-handle path{stroke:var(--default-handle-color)}.focused .handle{transform:rotate(45deg) scale(1.5)}',""]);const n=s},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i=e(t);return t[2]?"@media ".concat(t[2]," {").concat(i,"}"):i})).join("")},t.i=function(e,i,o){"string"==typeof e&&(e=[[null,e,""]]);var s={};if(o)for(var n=0;n<this.length;n++){var a=this[n][0];null!=a&&(s[a]=!0)}for(var r=0;r<e.length;r++){var d=[].concat(e[r]);o&&s[d[0]]||(i&&(d[2]?d[2]="".concat(i," and ").concat(d[2]):d[2]=i),t.push(d))}},t}}},t={};function i(o){var s=t[o];if(void 0!==s)return s.exports;var n=t[o]={id:o,exports:{}};return e[o](n,n.exports,i),n.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var o in t)i.o(t,o)&&!i.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=i(90);const t=document.createElement("template");t.innerHTML=`<style>${e.Z}</style><div class="before" id="before"> <slot name="before"></slot> </div> <div class="after" id="after"> <div class="handle-container"> <div class="divider"></div> <div class="handle"> <slot name="handle"> <svg xmlns="http://www.w3.org/2000/svg" class="default-handle" width="16" viewBox="-8 -3 16 6"> <path d="M -5 -2 L -7 0 L -5 2 M 5 -2 L 7 0 L 5 2" fill="none" vector-effect="non-scaling-stroke" stroke="#fff"/> </svg> </slot> </div> </div> <div class="after-overlay"> <div id="afterImageContainer"> <slot name="after"></slot> </div> </div> </div> `;const o={ArrowLeft:-1,ArrowRight:1},s=e=>({x:e.touches[0].pageX,y:e.touches[0].pageY});class n extends HTMLElement{constructor(){super(),this.exposure=50,this.isMouseDown=!1,this.isFocused=!1,this.hydrate=e=>{(e=>{if(e&&"object"==typeof e)return"IMG"===e.tagName})(e)&&(e.classList.contains("hydrated")||(e.addEventListener("dragstart",(e=>{e.preventDefault()})),e.addEventListener("load",this.resetWidth),e.classList.add("hydrated")))},this.onWindowMouseMove=e=>{this.isMouseDown&&this.slideToPageX(e.pageX)},this.bodyUserSelectStyle="",this.onMouseDown=e=>{window.addEventListener("mousemove",this.onWindowMouseMove),window.addEventListener("mouseup",this.onWindowMouseUp),this.isMouseDown=!0,this.slideToPageX(e.pageX,!0),this.focus(),this.bodyUserSelectStyle=window.document.body.style.userSelect,window.document.body.style.userSelect="none"},this.onWindowMouseUp=()=>{this.isMouseDown=!1,window.document.body.style.userSelect=this.bodyUserSelectStyle,window.removeEventListener("mousemove",this.onWindowMouseMove),window.removeEventListener("mouseup",this.onWindowMouseUp)},this.isTouchComparing=!1,this.hasTouchMoved=!1,this.onTouchStart=e=>{this.touchStartPoint=s(e),this.isFocused&&this.slideToPageX(e.touches[0].pageX,!0)},this.onTouchMove=e=>{if(this.isTouchComparing)return this.slideToPageX(e.touches[0].pageX),e.preventDefault(),!1;if(!this.hasTouchMoved){const t=s(e);if(Math.abs(t.y-this.touchStartPoint.y)<Math.abs(t.x-this.touchStartPoint.x))return this.isTouchComparing=!0,this.focus(),this.slideToPageX(e.touches[0].pageX,!0),e.preventDefault(),!1;this.hasTouchMoved=!0}},this.onTouchEnd=()=>{this.isTouchComparing=!1,this.hasTouchMoved=!1},this.onBlur=()=>{this.stopSlideAnimation(),this.isFocused=!1},this.onFocus=()=>{this.isFocused=!0},this.onKeyDown=e=>{if(this.keyboardSlideAnimationTimeoutId)return;const t=e.key;Object.keys(o).includes(t)&&this.startSlideAnimation(o[t])},this.onKeyUp=e=>{this.keyboardSlideAnimationTimeoutId&&Object.keys(o).includes(e.key)&&this.stopSlideAnimation()},this.resetWidth=()=>{this.imageWidth=this.offsetWidth,this.afterImageContainerElement.style.width=`${this.offsetWidth}px`};const e=this.attachShadow({mode:"open"});e.appendChild(t.content.cloneNode(!0)),this.beforeElement=e.getElementById("before"),this.afterElement=e.getElementById("after"),this.afterImageContainerElement=e.getElementById("afterImageContainer")}connectedCallback(){this.shadowRoot.querySelectorAll("slot").forEach((e=>{e.addEventListener("slotchange",(e=>{(e=>{if(e&&"object"==typeof e)return"SLOT"===e.tagName})(e.target)&&e.target.assignedElements().forEach(this.hydrate)}))})),this.querySelectorAll("img").forEach(this.hydrate),window.addEventListener("resize",this.resetWidth),this.slide(0),this.setAttribute("tabindex","0"),this.addEventListener("keydown",this.onKeyDown),this.addEventListener("keyup",this.onKeyUp),this.addEventListener("focus",this.onFocus),this.addEventListener("blur",this.onBlur),this.addEventListener("touchstart",this.onTouchStart),this.addEventListener("touchmove",this.onTouchMove,{passive:!1}),this.addEventListener("touchend",this.onTouchEnd),this.addEventListener("mousedown",this.onMouseDown),this.resetWidth(),this.classList.add("rendered")}disconnectedCallback(){this.transitionTimer&&window.clearTimeout(this.transitionTimer)}reset(){this.exposure=50,this.slide(0)}slide(e=0,t=!1){var i;if(this.exposure=(100,(i=this.exposure+e)<0?0:i>100?100:i),t){const e=100;this.afterElement.style.transition=`width ${e}ms`,this.transitionTimer=window.setTimeout((()=>{this.afterElement.style.transition=null,this.transitionTimer=null}),e)}this.afterElement.style.width=`${this.exposure}%`}slideToPageX(e,t=!1){const i=e-this.getBoundingClientRect().left-window.scrollX;this.exposure=i/this.imageWidth*100,this.slide(0,t)}startSlideAnimation(e){const t=1*e,i=()=>{this.keyboardSlideAnimationTimeoutId=window.setTimeout((()=>{this.animationRequestId=window.requestAnimationFrame(i)}),1e3/120),this.slide(t)};i()}stopSlideAnimation(){this.keyboardSlideAnimationTimeoutId&&(window.clearTimeout(this.keyboardSlideAnimationTimeoutId),window.cancelAnimationFrame(this.animationRequestId),this.keyboardSlideAnimationTimeoutId=null,this.animationRequestId=null)}}window.customElements.define("img-comparison-slider",n)})()})();
//# sourceMappingURL=index.js.map