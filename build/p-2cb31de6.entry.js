import{r as t,h as i,g as s}from"./p-0e5e79d4.js";const e=t=>({x:t.touches[0].pageX,y:t.touches[0].pageY}),o={ArrowLeft:-1,ArrowRight:1},n=class{constructor(i){t(this,i),this.exposure=50,this.isMouseDown=!1,this.isFocused=!1,this.isTouchComparing=!1,this.hasTouchMoved=!1}componentWillLoad(){this.el.querySelectorAll("img").forEach((t=>{t.addEventListener("dragstart",(t=>{t.preventDefault()})),t.addEventListener("load",(()=>{this.updateAfterWidth()}))}))}componentDidRender(){this.slide(0),this.updateAfterWidth(),this.el.setAttribute("tabindex","0")}disconnectedCallback(){this.transitionTimer&&window.clearTimeout(this.transitionTimer)}slide(t=0,i=!1){var s;if(this.exposure=(100,(s=this.exposure+t)<0?0:s>100?100:s),i){const t=100;this.after.style.transition=`width ${t}ms`,this.transitionTimer=window.setTimeout((()=>{this.after.style.transition=null,this.transitionTimer=null}),t)}this.after.style.width=this.exposure+"%"}onKeyDown(t){if(this.keyboardSlideAnimationTimeoutId)return;const i=t.key;Object.keys(o).includes(i)&&this.startSlideAnimation(o[i])}onKeyUp(t){this.keyboardSlideAnimationTimeoutId&&Object.keys(o).includes(t.key)&&this.stopSlideAnimation()}onMouseDown(t){this.isMouseDown=!0,this.slideToPageX(t.pageX,!0),this.el.focus()}onMouseUp(t){this.isMouseDown=!1}onMouseMove(t){this.isMouseDown&&this.slideToPageX(t.pageX)}onTouchStart(t){this.touchStartPoint=e(t),this.isFocused&&this.slideToPageX(t.touches[0].pageX,!0)}onTouchMove(t){if(this.isTouchComparing)return this.slideToPageX(t.touches[0].pageX),t.preventDefault(),!1;if(!this.hasTouchMoved){const i=e(t);if(Math.abs(i.y-this.touchStartPoint.y)<Math.abs(i.x-this.touchStartPoint.x))return this.isTouchComparing=!0,this.el.focus(),this.slideToPageX(t.touches[0].pageX,!0),t.preventDefault(),!1;this.hasTouchMoved=!0}}touchEnd(){this.isTouchComparing=!1,this.hasTouchMoved=!1}onBlur(){this.stopSlideAnimation(),this.isFocused=!1}onFocus(){this.isFocused=!0}updateAfterWidth(){this.imageWidth=this.el.offsetWidth,this.afterImageContainer.style.width=this.el.offsetWidth+"px"}slideToPageX(t,i=!1){const s=t-this.el.getBoundingClientRect().left;this.exposure=s/this.imageWidth*100,this.slide(0,i)}startSlideAnimation(t){const i=1*t,s=()=>{this.keyboardSlideAnimationTimeoutId=window.setTimeout((()=>{this.animationRequestId=window.requestAnimationFrame(s)}),1e3/120),this.slide(i)};s()}stopSlideAnimation(){this.keyboardSlideAnimationTimeoutId&&(window.clearTimeout(this.keyboardSlideAnimationTimeoutId),window.cancelAnimationFrame(this.animationRequestId),this.keyboardSlideAnimationTimeoutId=null,this.animationRequestId=null)}render(){return i("div",null,i("div",{class:"before",ref:t=>this.before=t},i("slot",{name:"before"})),i("div",{class:"after",ref:t=>this.after=t},i("div",{class:"hint-wrapper"},i("slot",{name:"hint"},i("div",{class:"hint"}))),i("div",{class:"after-overlay"},i("div",{ref:t=>this.afterImageContainer=t},i("slot",{name:"after"})))))}get el(){return s(this)}};n.style=":host{--divider:1px solid #d7d7d7;--hint-size:40px;--hint-color:#d7d7d7;--hint-opacity:0.5;--hint-opacity-active:0;position:relative;display:inline-block;font-size:0;overflow:hidden}:host(:focus) .hint-wrapper{opacity:var(--hint-opacity-active)}::slotted(img){-webkit-user-drag:none;-khtml-user-drag:none;-moz-user-drag:none;-o-user-drag:none;user-drag:none;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.component:hover .hint-wrapper{opacity:var(--hint-opacity-active)}.before{position:relative;z-index:-2}.after{position:absolute;left:0;top:0;bottom:0;border-right:var(--divider);z-index:-1}.after .after-overlay{overflow:hidden}.hint-wrapper{position:absolute;width:var(--hint-size);height:var(--hint-size);margin-top:calc(var(--hint-size) / (-2));margin-right:calc(var(--hint-size) / (-2));top:50%;right:0;pointer-events:none;-webkit-box-sizing:border-box;box-sizing:border-box;opacity:var(--hint-opacity);-webkit-transition:opacity 1s;transition:opacity 1s}.hint{background-color:var(--hint-color);width:var(--hint-size);height:var(--hint-size);-webkit-transition:-webkit-transform 1s;transition:-webkit-transform 1s;transition:transform 1s;transition:transform 1s, -webkit-transform 1s;-webkit-transform:rotate(45deg);transform:rotate(45deg);-webkit-box-shadow:0px 0px 15px 0px rgba(0, 0, 0, 0.75);box-shadow:0px 0px 15px 0px rgba(0, 0, 0, 0.75)}.focused .hint{-webkit-transform:rotate(45deg) scale(1.5);transform:rotate(45deg) scale(1.5)}";export{n as img_comparison_slider}